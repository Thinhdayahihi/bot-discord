import base64
                               
# Tran Thinh Bot
# Catoon Community
# Base64 encoded Python file
# Encoded by Tran Thinh Bot
python_code = 'aW1wb3J0IG5leHRjb3JkDQpmcm9tIG5leHRjb3JkLmV4dCBpbXBvcnQgY29tbWFuZHMNCmZyb20gbmV4dGNvcmQgaW1wb3J0IEVtYmVkDQppbXBvcnQgb3MNCmltcG9ydCB0ZW1wZmlsZQ0KaW1wb3J0IGJhc2U2NA0KZnJvbSBuZXh0Y29yZCBpbXBvcnQgSW50ZXJhY3Rpb24sIEJ1dHRvblN0eWxlLCBCdXR0b24sIHVpDQppbXBvcnQgdGltZQ0KaW1wb3J0IHJhbmRvbQ0KaW1wb3J0IHJlcXVlc3RzDQpmcm9tIGJzNCBpbXBvcnQgQmVhdXRpZnVsU291cA0KaW1wb3J0IGRhdGV0aW1lDQpmcm9tIG5leHRjb3JkLnVpIGltcG9ydCBTZWxlY3QsIFZpZXcNCmltcG9ydCBzdWJwcm9jZXNzDQppbXBvcnQgemxpYg0KaW1wb3J0IGJhc2U2NA0KaW1wb3J0IG1hcnNoYWwNCmltcG9ydCBweV9jb21waWxlDQppbXBvcnQganNvbg0KaW1wb3J0IHN0cmluZw0KaW1wb3J0IGFzeW5jaW8NCmZyb20gc2FtcF9jbGllbnQuY2xpZW50IGltcG9ydCBTYW1wQ2xpZW50DQpmcm9tIG5leHRjb3JkIGltcG9ydCBBY3Rpdml0eSwgQWN0aXZpdHlUeXBlLCBTdGF0dXMNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lDQoNCmludGVudHMgPSBuZXh0Y29yZC5JbnRlbnRzLmRlZmF1bHQoKQ0KaW50ZW50cy5tZXNzYWdlX2NvbnRlbnQgPSBUcnVlICANCmludGVudHMubWVtYmVycyA9IFRydWUgIA0KYm90ID0gY29tbWFuZHMuQm90KGNvbW1hbmRfcHJlZml4PVsnLCcsJyEnXSwgaW50ZW50cz1pbnRlbnRzKQ0KQUxMT1dFRF9ST0xFX0lEID0gJzEyNjIyMzg5NjkzNjI2NDkxNDcnDQpzdGFydF90aW1lID0gdGltZS50aW1lKCkNCmludGVudHMuZ3VpbGRzID0gVHJ1ZQ0KQVVUSE9SSVpFRF9VU0VSX0lEID0gOTU1NzkyNTA2NDM4Njk3MDEwDQpzZXJ2ZXJfaW5mbyA9IHt9DQpBRE1JTl9JRCA9IDk1NTc5MjUwNjQzODY5NzAxMA0KDQpkZWYgaXNfYWRtaW4oKToNCiAgICBhc3luYyBkZWYgcHJlZGljYXRlKGN0eCk6DQogICAgICAgIHJldHVybiBjdHguYXV0aG9yLmd1aWxkX3Blcm1pc3Npb25zLmFkbWluaXN0cmF0b3INCiAgICByZXR1cm4gY29tbWFuZHMuY2hlY2socHJlZGljYXRlKQ0KDQpAYm90LmV2ZW50DQphc3luYyBkZWYgb25fcmVhZHkoKToNCiAgICBwcmludChmJ0xvZ2dlZCBpbiBhcyB7Ym90LnVzZXIubmFtZX0nKQ0KICAgIGF3YWl0IGJvdC53YWl0X3VudGlsX3JlYWR5KCkNCiAgICBndWlsZF9pZCA9IDEyMzQ1Njc4OTAxMjM0NTY3OCAgDQogICAgZ3VpbGQgPSBuZXh0Y29yZC5PYmplY3QoaWQ9Z3VpbGRfaWQpDQoNCkBib3QuZXZlbnQNCmFzeW5jIGRlZiBvbl9tZXNzYWdlKG1lc3NhZ2UpOg0KICAgIGlmIG1lc3NhZ2UuYXV0aG9yID09IGJvdC51c2VyOg0KICAgICAgICByZXR1cm4NCiAgICANCiAgICBpZiAiPEAxMjcxMTA3NTg3NDM3MzYzMjEwPiIgaW4gbWVzc2FnZS5jb250ZW50Lmxvd2VyKCk6DQogICAgICAgIGF3YWl0IG1lc3NhZ2UuY2hhbm5lbC5zZW5kKCJUw7RpIGPDsyB0aOG7gyBnacO6cCDEkcaw4bujYyBnw6wgY2hvIGLhuqFuIGjDo3kgLGNtZHMgxJHhu4MgeGVtIGxpc3QgbOG7h25oIikNCiAgICANCiAgICBhd2FpdCBib3QucHJvY2Vzc19jb21tYW5kcyhtZXNzYWdlKQ0KICAgIA0KQGJvdC5jb21tYW5kKCkNCkBjb21tYW5kcy5oYXNfcGVybWlzc2lvbnMoYWRtaW5pc3RyYXRvcj1UcnVlKQ0KYXN5bmMgZGVmIGFkbWluX29ubHkoY3R4KToNCiAgICBhd2FpdCBjdHguc2VuZCgiQuG6oW4gY8OzIHF1eeG7gW4gYWRtaW5pc3RyYXRvciBuw6puIGLhuqFuIGPDsyB0aOG7gyBz4butIGThu6VuZyBs4buHbmggbsOgeSEiKQ0KDQpAYm90LmV2ZW50DQphc3luYyBkZWYgb25fY29tbWFuZF9lcnJvcihjdHgsIGVycm9yKToNCiAgICBpZiBpc2luc3RhbmNlKGVycm9yLCBjb21tYW5kcy5NaXNzaW5nUGVybWlzc2lvbnMpOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgiQuG6oW4ga2jDtG5nIGPDsyBxdXnhu4FuIMSR4buDIHPhu60gZOG7pW5nIGzhu4duaCBuw6B5ISIpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgZGF5KGN0eCk6DQogICAgdG9kYXkgPSBkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJUEnKQ0KICAgIGF3YWl0IGN0eC5zZW5kKGYiSMO0bSBuYXkgbMOgOiB7dG9kYXl9IikNCg0KQGJvdC5jb21tYW5kKCkNCkBjb21tYW5kcy5oYXNfcGVybWlzc2lvbnMoYWRtaW5pc3RyYXRvcj1UcnVlKQ0KYXN5bmMgZGVmIHJvbGUoY3R4LCBtZW1iZXI6IG5leHRjb3JkLk1lbWJlciA9IE5vbmUsICosIHJvbGU6IG5leHRjb3JkLlJvbGUgPSBOb25lKToNCiAgICBpZiBtZW1iZXIgaXMgTm9uZSBvciByb2xlIGlzIE5vbmU6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJC4bqhbiBj4bqnbiBjdW5nIGPhuqVwIGPhuqMgdGjDoG5oIHZpw6puIHbDoCB2YWkgdHLDsi4gVsOtIGThu6U6IGAscm9sZSBAbWVtYmVyIEByb2xlYCIpDQogICAgICAgIHJldHVybg0KDQogICAgdHJ5Og0KICAgICAgICBhd2FpdCBtZW1iZXIuYWRkX3JvbGVzKHJvbGUpDQogICAgICAgIGF3YWl0IGN0eC5zZW5kKGYixJDDoyB0aMOqbSByb2xlIHtyb2xlLm5hbWV9IGNobyB7bWVtYmVyLm1lbnRpb259IHRow6BuaCBjw7RuZy4iKQ0KICAgIGV4Y2VwdCBuZXh0Y29yZC5Gb3JiaWRkZW46DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJCb3Qga2jDtG5nIGPDsyBxdXnhu4FuIMSR4buDIHRow6ptIHJvbGUuIikNCiAgICBleGNlcHQgbmV4dGNvcmQuSFRUUEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBhd2FpdCBjdHguc2VuZChmIkPDsyBs4buXaSB44bqjeSByYSBraGkgY+G7kSBn4bqvbmcgdGjDqm0gcm9sZToge2V9IikNCg0KQGJvdC5jb21tYW5kKCkNCkBjb21tYW5kcy5oYXNfcGVybWlzc2lvbnMoYWRtaW5pc3RyYXRvcj1UcnVlKQ0KYXN5bmMgZGVmIHhyb2xlKGN0eCwgbWVtYmVyOiBuZXh0Y29yZC5NZW1iZXIgPSBOb25lLCAqLCByb2xlOiBuZXh0Y29yZC5Sb2xlID0gTm9uZSk6DQogICAgaWYgbWVtYmVyIGlzIE5vbmUgb3Igcm9sZSBpcyBOb25lOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgiQuG6oW4gY+G6p24gY3VuZyBj4bqlcCBj4bqjIHRow6BuaCB2acOqbiB2w6AgdmFpIHRyw7IuIFbDrSBk4bulOiBgLHhyb2xlIEBtZW1iZXIgQHJvbGVgIikNCiAgICAgICAgcmV0dXJuDQoNCiAgICB0cnk6DQogICAgICAgIGF3YWl0IG1lbWJlci5yZW1vdmVfcm9sZXMocm9sZSkNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZiLEkMOjIHjDs2Egcm9sZSB7cm9sZS5uYW1lfSBj4bunYSB7bWVtYmVyLm1lbnRpb259IHRow6BuaCBjw7RuZy4iKQ0KICAgIGV4Y2VwdCBuZXh0Y29yZC5Gb3JiaWRkZW46DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJCb3Qga2jDtG5nIGPDsyBxdXnhu4FuIMSR4buDIHjDs2Egcm9sZS4iKQ0KICAgIGV4Y2VwdCBuZXh0Y29yZC5IVFRQRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKGYiQ8OzIGzhu5dpIHjhuqN5IHJhIGtoaSBj4buRIGfhuq9uZyB4w7NhIHJvbGU6IHtlfSIpDQoNCkBib3QuY29tbWFuZCgpDQpAY29tbWFuZHMuaGFzX3Blcm1pc3Npb25zKGFkbWluaXN0cmF0b3I9VHJ1ZSkNCmFzeW5jIGRlZiBraWNrKGN0eCwgbWVtYmVyOiBuZXh0Y29yZC5NZW1iZXIsICosIHJlYXNvbjogc3RyID0gTm9uZSk6DQogICAgaWYgbWVtYmVyID09IGN0eC5hdXRob3I6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJC4bqhbiBraMO0bmcgdGjhu4Mga2ljayBjaMOtbmggbcOsbmguIikNCiAgICAgICAgcmV0dXJuDQoNCiAgICB0cnk6DQogICAgICAgIGF3YWl0IG1lbWJlci5raWNrKHJlYXNvbj1yZWFzb24pDQogICAgICAgIGF3YWl0IGN0eC5zZW5kKGYie21lbWJlci5tZW50aW9ufSDEkcOjIGLhu4sga2ljayByYSBraOG7j2kgc2VydmVyLiBMw70gZG86IHtyZWFzb24gaWYgcmVhc29uIGVsc2UgJ0tow7RuZyBjw7MgbMO9IGRvLid9IikNCiAgICBleGNlcHQgbmV4dGNvcmQuRm9yYmlkZGVuOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgiQm90IGtow7RuZyBjw7MgcXV54buBbiDEkeG7gyBraWNrIHRow6BuaCB2acOqbi4iKQ0KICAgIGV4Y2VwdCBuZXh0Y29yZC5IVFRQRXhjZXB0aW9uOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgiQ8OzIGzhu5dpIHjhuqN5IHJhIGtoaSBj4buRIGfhuq9uZyBraWNrIHRow6BuaCB2acOqbi4iKQ0KDQpAYm90LmNvbW1hbmQoKQ0KQGNvbW1hbmRzLmhhc19wZXJtaXNzaW9ucyhhZG1pbmlzdHJhdG9yPVRydWUpDQphc3luYyBkZWYgYmFuKGN0eCwgbWVtYmVyOiBuZXh0Y29yZC5NZW1iZXIsICosIHJlYXNvbjogc3RyID0gTm9uZSk6DQogICAgaWYgbWVtYmVyID09IGN0eC5hdXRob3I6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJC4bqhbiBraMO0bmcgdGjhu4MgYmFuIGNow61uaCBtw6xuaC4iKQ0KICAgICAgICByZXR1cm4NCg0KICAgIHRyeToNCiAgICAgICAgYXdhaXQgbWVtYmVyLmJhbihyZWFzb249cmVhc29uKQ0KICAgICAgICBhd2FpdCBjdHguc2VuZChmInttZW1iZXIubWVudGlvbn0gxJHDoyBi4buLIGJhbiBraOG7j2kgc2VydmVyLiBMw70gZG86IHtyZWFzb24gaWYgcmVhc29uIGVsc2UgJ0tow7RuZyBjw7MgbMO9IGRvLid9IikNCiAgICBleGNlcHQgbmV4dGNvcmQuRm9yYmlkZGVuOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgiQm90IGtow7RuZyBjw7MgcXV54buBbiDEkeG7gyBiYW4gdGjDoG5oIHZpw6puLiIpDQogICAgZXhjZXB0IG5leHRjb3JkLkhUVFBFeGNlcHRpb246DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJDw7MgbOG7l2kgeOG6o3kgcmEga2hpIGPhu5EgZ+G6r25nIGJhbiB0aMOgbmggdmnDqm4uIikNCg0KQGJvdC5jb21tYW5kKCkNCkBjb21tYW5kcy5oYXNfcGVybWlzc2lvbnMoYWRtaW5pc3RyYXRvcj1UcnVlKQ0KYXN5bmMgZGVmIHVuYmFuKGN0eCwgdXNlcl9pZDogaW50KToNCiAgICB0cnk6DQogICAgICAgIHVzZXIgPSBhd2FpdCBib3QuZmV0Y2hfdXNlcih1c2VyX2lkKQ0KICAgICAgICBhd2FpdCBjdHguZ3VpbGQudW5iYW4odXNlcikNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZidOZ8aw4budaSBkw7luZyB7dXNlci5uYW1lfSDEkcOjIMSRxrDhu6NjIGfhu6EgYuG7jyBraOG7j2kgZGFuaCBzw6FjaCBj4bqlbS4nKQ0KICAgIGV4Y2VwdCBuZXh0Y29yZC5Ob3RGb3VuZDoNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoJ05nxrDhu51pIGTDuW5nIGtow7RuZyB0w6xtIHRo4bqleS4nKQ0KICAgIGV4Y2VwdCBuZXh0Y29yZC5Gb3JiaWRkZW46DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCdCb3Qga2jDtG5nIGPDsyBxdXnhu4FuIHRo4buxYyBoaeG7h24gaMOgbmggxJHhu5luZyBuw6B5LicpDQogICAgZXhjZXB0IG5leHRjb3JkLkhUVFBFeGNlcHRpb246DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCfEkMOjIHjhuqN5IHJhIGzhu5dpIGtoaSBn4buhIGLhu48gbmfGsOG7nWkgZMO5bmcga2jhu49pIGRhbmggc8OhY2ggY+G6pW0uJykNCg0KQGJvdC5jb21tYW5kKCkNCkBjb21tYW5kcy5oYXNfcGVybWlzc2lvbnMoYWRtaW5pc3RyYXRvcj1UcnVlKQ0KYXN5bmMgZGVmIG11dGUoY3R4LCBtZW1iZXI6IG5leHRjb3JkLk1lbWJlciwgKiwgcmVhc29uPU5vbmUpOg0KICAgIGd1aWxkID0gY3R4Lmd1aWxkDQogICAgbXV0ZV9yb2xlID0gbmV4dGNvcmQudXRpbHMuZ2V0KGd1aWxkLnJvbGVzLCBuYW1lPSdNdXRlZCcpDQogICAgaWYgbXV0ZV9yb2xlIGlzIE5vbmU6DQogICAgICAgIG11dGVfcm9sZSA9IGF3YWl0IGd1aWxkLmNyZWF0ZV9yb2xlKG5hbWU9J011dGVkJykNCiAgICAgICAgZm9yIGNoYW5uZWwgaW4gZ3VpbGQuY2hhbm5lbHM6DQogICAgICAgICAgICBhd2FpdCBjaGFubmVsLnNldF9wZXJtaXNzaW9ucyhtdXRlX3JvbGUsIHNlbmRfbWVzc2FnZXM9RmFsc2UsIHNwZWFrPUZhbHNlKQ0KDQogICAgYXdhaXQgbWVtYmVyLmFkZF9yb2xlcyhtdXRlX3JvbGUsIHJlYXNvbj1yZWFzb24pDQogICAgYXdhaXQgY3R4LnNlbmQoZid7bWVtYmVyLm1lbnRpb259IMSRw6MgxJHGsOG7o2MgY+G6pW0gbsOzaSBjaHV54buHbi4nKQ0KDQpAYm90LmNvbW1hbmQoKQ0KQGNvbW1hbmRzLmhhc19wZXJtaXNzaW9ucyhhZG1pbmlzdHJhdG9yPVRydWUpDQphc3luYyBkZWYgdW5tdXRlKGN0eCwgbWVtYmVyOiBuZXh0Y29yZC5NZW1iZXIpOg0KICAgIG11dGVfcm9sZSA9IG5leHRjb3JkLnV0aWxzLmdldChjdHguZ3VpbGQucm9sZXMsIG5hbWU9J011dGVkJykNCiAgICBpZiBtdXRlX3JvbGUgaXMgTm9uZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoJ1ZhaSB0csOyIE11dGUga2jDtG5nIHThu5NuIHThuqFpLicpDQogICAgICAgIHJldHVybg0KDQogICAgYXdhaXQgbWVtYmVyLnJlbW92ZV9yb2xlcyhtdXRlX3JvbGUpDQogICAgYXdhaXQgY3R4LnNlbmQoZid7bWVtYmVyLm1lbnRpb259IMSRw6MgxJHGsOG7o2MgYuG7jyBj4bqlbSBuw7NpIGNodXnhu4duLicpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgYXZ0KGN0eCwgbWVtYmVyOiBuZXh0Y29yZC5NZW1iZXIgPSBOb25lKToNCiAgICBtZW1iZXIgPSBtZW1iZXIgb3IgY3R4LmF1dGhvcg0KDQogICAgdHJ5Og0KICAgICAgICBhdmF0YXJfdXJsID0gbWVtYmVyLmRpc3BsYXlfYXZhdGFyLnVybA0KICAgICAgICBhd2FpdCBjdHguc2VuZChhdmF0YXJfdXJsKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZiJDw7MgbOG7l2kgeOG6o3kgcmE6IHtlfSIpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgbWF5Y2h1KGN0eCk6DQogICAgZ3VpbGQgPSBjdHguZ3VpbGQNCiAgICANCiAgICBlbWJlZCA9IEVtYmVkKHRpdGxlPWYiVGjDtG5nIFRpbiBTZXJ2ZXI6IHtndWlsZC5uYW1lfSIsIGRlc2NyaXB0aW9uPWYiSUQ6IHtndWlsZC5pZH0iLCBjb2xvcj1uZXh0Y29yZC5Db2xvci5ibHVlKCkpDQogICAgDQogICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IlPhu58gaOG7r3UgYuG7n2kiLCB2YWx1ZT1mIntndWlsZC5vd25lcn0iLCBpbmxpbmU9VHJ1ZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iU+G7kSB0aMOgbmggdmnDqm4iLCB2YWx1ZT1mIntndWlsZC5tZW1iZXJfY291bnR9IiwgaW5saW5lPVRydWUpDQogICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IlPhu5Ega8OqbmgiLCB2YWx1ZT1mIntsZW4oZ3VpbGQuY2hhbm5lbHMpfSIsIGlubGluZT1UcnVlKQ0KICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSJT4buRIHZhaSB0csOyIiwgdmFsdWU9ZiJ7bGVuKGd1aWxkLnJvbGVzKX0iLCBpbmxpbmU9VHJ1ZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iTmfDoHkgdGjDoG5oIGzhuq1wIiwgdmFsdWU9ZiJ7Z3VpbGQuY3JlYXRlZF9hdC5zdHJmdGltZSgnJWQvJW0vJVkgJUg6JU06JVMnKX0iLCBpbmxpbmU9VHJ1ZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iVsO5bmciLCB2YWx1ZT1mIntndWlsZC5yZWdpb259IiwgaW5saW5lPVRydWUpDQogICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9Ik7hu4FuIHThuqNuZyIsIHZhbHVlPWYieydDw7MnIGlmIGd1aWxkLnByZW1pdW1fc3Vic2NyaXB0aW9uX2NvdW50ID4gMCBlbHNlICdLaMO0bmcnfSIsIGlubGluZT1UcnVlKQ0KDQogICAgZW1iZWQuc2V0X3RodW1ibmFpbCh1cmw9Z3VpbGQuaWNvbi51cmwpDQogICAgDQogICAgYXdhaXQgY3R4LnNlbmQoZW1iZWQ9ZW1iZWQpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgc2F5KGN0eCwgY2hhbm5lbF9pZDogaW50LCAqLCBtZXNzYWdlOiBzdHIpOg0KICAgIGNoYW5uZWwgPSBib3QuZ2V0X2NoYW5uZWwoY2hhbm5lbF9pZCkNCiAgICBpZiBjaGFubmVsIGlzIG5vdCBOb25lOg0KICAgICAgICBhd2FpdCBjaGFubmVsLnNlbmQobWVzc2FnZSkNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZidUaMO0bmcgYsOhbyDEkcOjIMSRxrDhu6NjIGfhu61pIMSR4bq/biBrw6puaCB7Y2hhbm5lbC5uYW1lfScpDQogICAgZWxzZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoJ0vDqm5oIGtow7RuZyBo4bujcCBs4buHIScpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgcGluZyhjdHgpOg0KICAgIGF3YWl0IGN0eC5zZW5kKCJQb25nISIpDQoNCkBib3QuY29tbWFuZCgpDQpAY29tbWFuZHMuaGFzX3Blcm1pc3Npb25zKGFkbWluaXN0cmF0b3I9VHJ1ZSkNCmFzeW5jIGRlZiBjbGVhcihjdHgsIGFtb3VudDogaW50KToNCiAgICBpZiBjdHgubWVzc2FnZS5hdXRob3IuZ3VpbGRfcGVybWlzc2lvbnMubWFuYWdlX21lc3NhZ2VzOg0KICAgICAgICBpZiBhbW91bnQgPCAxIG9yIGFtb3VudCA+IDEwMDoNCiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKCdT4buRIGzGsOG7o25nIHRpbiBuaOG6r24gY+G6p24geMOzYSBwaOG6o2kgdOG7qyAxIMSR4bq/biAxMDAuJykNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICANCiAgICAgICAgZGVsZXRlZCA9IGF3YWl0IGN0eC5jaGFubmVsLnB1cmdlKGxpbWl0PWFtb3VudCkNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZifEkMOjIHjDs2Ege2xlbihkZWxldGVkKX0gdGluIG5o4bqvbi4nLCBkZWxldGVfYWZ0ZXI9NSkNCiAgICBlbHNlOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgnQuG6oW4ga2jDtG5nIGPDsyBxdXnhu4FuIHjDs2EgdGluIG5o4bqvbi4nKQ0KDQpAYm90LmNvbW1hbmQobmFtZT0nY21kcycpDQphc3luYyBkZWYgY3VzdG9tX2hlbHAoY3R4KToNCiAgICBlbWJlZCA9IG5leHRjb3JkLkVtYmVkKHRpdGxlPSJEYW5oIHPDoWNoIGzhu4duaCBj4bunYSBib3QiLCBjb2xvcj0weDAwZmYwMCkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iLG1heWNodSIsIHZhbHVlPSLEkOG7gyB4ZW0gdGjDtG5nIHRpbiBtw6F5IGNo4bunISIsIGlubGluZT1GYWxzZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iLGF2dCBbbWVtYmVyXSIsIHZhbHVlPSLEkOG7gyB4ZW0gYXZhdGFyIGFpIMSRw7MhLiIsIGlubGluZT1GYWxzZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iLGJhbiIsIHZhbHVlPSJM4buHbmggYmFuIGNo4buJIEFkbWluIG3hu5tpIMSRxrDhu6NjIHRo4buxYyBoaeG7h24hIiwgaW5saW5lPUZhbHNlKQ0KICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSIsdW5iYW4iLCB2YWx1ZT0ixJDhu4MgZ+G7oSBiYW4gbWVtYmVyISIsIGlubGluZT1GYWxzZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iLGtpY2siLCB2YWx1ZT0iTOG7h25oIGtpY2sgY2jhu4kgQWRtaW4gbeG7m2kgxJHGsOG7o2MgdGjhu7FjIGhp4buHbiEiLCBpbmxpbmU9RmFsc2UpDQogICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9Iix0aG9pdGlldCIsIHZhbHVlPSLEkOG7gyB4ZW0gdGjhu51pIHRp4bq/dCB0aMOgbmggcGjhu5EgY+G7p2EgYuG6oW4hIiwgaW5saW5lPUZhbHNlKQ0KICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSIscm9sbCIsIHZhbHVlPSLEkOG7gyB0dW5nIHjDumMgeOG6r2MhIiwgaW5saW5lPUZhbHNlKQ0KICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSIsaW5mbyAsaW5mbzIiLCB2YWx1ZT0ixJDhu4MgeGVtIHRow7RuZyB0aW4gYm90ISIsIGlubGluZT1GYWxzZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iLGpva2UiLCB2YWx1ZT0iTuG6v3UgY+G6o20gdGjhuqV5IGhvbmcgxJHGsOG7o2MgdnVpISIsIGlubGluZT1GYWxzZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iLGRhb2x5IiwgdmFsdWU9IsSQ4bqhbyBsw70gY3Xhu5ljIHPhu5FuZyEiLCBpbmxpbmU9RmFsc2UpDQogICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IixxdW90ZSIsIHZhbHVlPSLEkOG7gyBuZ2hlIG3hu5l0IHbDoGkgY8OidSBjaMOibSBuZ8O0biAhIiwgaW5saW5lPUZhbHNlKQ0KICAgIGVtYmVkLnNldF9mb290ZXIodGV4dD0iU+G7rSBk4bulbmcgJyxjb21tYW5kcyBbbOG7h25oXScgxJHhu4MgYmnhur90IHRow6ptIGNoaSB0aeG6v3QgduG7gSBs4buHbmggY+G7pSB0aOG7gy4iKQ0KDQogICAgYXdhaXQgY3R4LnNlbmQoZW1iZWQ9ZW1iZWQpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgaW5mbyhjdHgpOg0KICAgIGN1cnJlbnRfdGltZSA9IHRpbWUudGltZSgpDQogICAgdXB0aW1lX3NlY29uZHMgPSBpbnQoY3VycmVudF90aW1lIC0gc3RhcnRfdGltZSkNCiAgICB1cHRpbWVfbWludXRlcywgdXB0aW1lX3NlY29uZHMgPSBkaXZtb2QodXB0aW1lX3NlY29uZHMsIDYwKQ0KICAgIHVwdGltZV9ob3VycywgdXB0aW1lX21pbnV0ZXMgPSBkaXZtb2QodXB0aW1lX21pbnV0ZXMsIDYwKQ0KICAgIHVwdGltZV9kYXlzLCB1cHRpbWVfaG91cnMgPSBkaXZtb2QodXB0aW1lX2hvdXJzLCAyNCkNCg0KICAgIGZvcm1hdHRlZF91cHRpbWUgPSBmInt1cHRpbWVfZGF5c30gbmfDoHksIHt1cHRpbWVfaG91cnN9IGdp4budLCB7dXB0aW1lX21pbnV0ZXN9IHBow7p0LCB7dXB0aW1lX3NlY29uZHN9IGdpw6J5Ig0KICAgIA0KICAgIGF3YWl0IGN0eC5zZW5kKGYiWGluIGNow6BvIG3hu41pIG5nxrDhu51pLCB0w7RpIGzDoCBib3QgxJHGsOG7o2MgdOG6oW8gYuG7n2kgVHJhblRoaW5oIERldmVsb3BlclxuVmVyc2lvbjogMi4wXG5Uw7RpIMSRw6MgaG/huqF0IMSR4buZbmcgdHJvbmc6ICoqe2Zvcm1hdHRlZF91cHRpbWV9KioiKQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIGluZm8yKGN0eCk6DQogICAgdXB0aW1lID0gdGltZS50aW1lKCkgLSBzdGFydF90aW1lDQogICAgZm9ybWF0dGVkX3VwdGltZSA9IGYie3VwdGltZSAvLyAzNjAwOi4wZn0gZ2nhu50ge3VwdGltZSAlIDM2MDAgLy8gNjA6LjBmfSBwaMO6dCB7dXB0aW1lICUgNjA6LjBmfSBnacOieSINCiAgICBzZXJ2ZXJfY291bnQgPSBsZW4oYm90Lmd1aWxkcykNCiAgICB1c2VyX2NvdW50ID0gc3VtKGd1aWxkLm1lbWJlcl9jb3VudCBmb3IgZ3VpbGQgaW4gYm90Lmd1aWxkcykNCiAgICANCiAgICBpbmZvX3RleHQgPSAoDQogICAgICAgIGYiKipUaMO0bmcgdGluIEJvdCoqXG4iDQogICAgICAgIGYiLSAqKlTDqm4gQm90Kio6IHtib3QudXNlci5uYW1lfVxuIg0KICAgICAgICBmIi0gKipJRCoqOiB7Ym90LnVzZXIuaWR9XG4iDQogICAgICAgIGYiLSAqKlPhu5EgbcOheSBjaOG7pyoqOiB7c2VydmVyX2NvdW50fVxuIg0KICAgICAgICBmIi0gKipT4buRIG5nxrDhu51pIGTDuW5nKio6IHt1c2VyX2NvdW50fVxuIg0KICAgICAgICBmIi0gKipUaOG7nWkgZ2lhbiBob+G6oXQgxJHhu5luZyoqOiB7Zm9ybWF0dGVkX3VwdGltZX1cbiINCiAgICAgICAgZiItICoqUGhpw6puIGLhuqNuKio6IDIuMFxuIg0KICAgICAgICBmIi0gKipU4bqhbyBi4bufaSoqOiBUcmFuVGhpbmggRGV2ZWxvcGVyXG4iDQogICAgICAgIGYiLSAqKkPhu5luZyDEkeG7k25nKio6IFtTZXJ2ZXIgQ2jDrW5oXShodHRwczovL2Rpc2NvcmQuY29tL2ludml0ZS9qVXdkYjZ3dDRoKVxuIg0KICAgICAgICBmIi0gKipM4buHbmgqKjogU+G7rSBk4bulbmcgYCxjb21tYW5kc2AgxJHhu4MgeGVtIGRhbmggc8OhY2ggbOG7h25oLlxuIg0KICAgICkNCiAgICANCiAgICBhd2FpdCBjdHguc2VuZChpbmZvX3RleHQpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgam9rZShjdHgpOg0KICAgIGpva2VzID0gWw0KICAgICAgICAiVOG6oWkgc2FvIGfDoCB2xrDhu6N0IMSRxrDhu51uZz8gxJDhu4Mgc2FuZyBiw6puIGtpYSEiLA0KICAgICAgICAiQ8OhaSBnw6wgxJFpIGzDqm4gbcOgIGtow7RuZyDEkWkgeHXhu5FuZz8gVHXhu5VpIHTDoWMhIiwNCiAgICAgICAgIkPDsyBoYWkgbG/huqFpIG5nxrDhu51pIHRyb25nIHRo4bq/IGdp4bubaSBuw6B5OiBuaOG7r25nIG5nxrDhu51pIGhp4buDdSBow6BpIGjGsOG7m2MgdsOgIG5o4buvbmcgbmfGsOG7nWkga2jDtG5nIGhp4buDdS4iDQogICAgXQ0KICAgIGF3YWl0IGN0eC5zZW5kKHJhbmRvbS5jaG9pY2Uoam9rZXMpKQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIHJvbGwoY3R4LCBzaWRlczogaW50ID0gNik6DQogICAgcmVzdWx0ID0gcmFuZG9tLnJhbmRpbnQoMSwgc2lkZXMpDQogICAgYXdhaXQgY3R4LnNlbmQoZiJC4bqhbiDEkcOjIGzEg24geMO6YyB44bqvYyB2w6Aga+G6v3QgcXXhuqMgbMOgOiB7cmVzdWx0fSIpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgdGhvaXRpZXQoY3R4LCAqLCBjaXR5OiBzdHIgPSBOb25lKToNCiAgICBpZiBjaXR5IGlzIE5vbmU6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJWdWkgbMOybmcgY3VuZyBj4bqlcCB0w6puIHRow6BuaCBwaOG7kSB0aGVvIMSR4buLbmggZOG6oW5nOiBgLHRob2l0aWV0IFt0w6puIHRow6BuaCBwaOG7kV1gLlxuVsOtIGThu6U6IGAsdGhvaXRpZXQgSGFub2lgLiIpDQogICAgICAgIHJldHVybg0KICAgIA0KICAgIGRlZiBnZXRfd2VhdGhlcl9mcm9tX2dvb2dsZShjaXR5KToNCiAgICAgICAgcXVlcnkgPSBmIndlYXRoZXIge2NpdHl9Ig0KICAgICAgICB1cmwgPSBmImh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vc2VhcmNoP3E9e3F1ZXJ5fSINCiAgICAgICAgDQogICAgICAgIGhlYWRlcnMgPSB7DQogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NDcyLjEyNCBTYWZhcmkvNTM3LjM2Ig0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycykNCiAgICAgICAgc291cCA9IEJlYXV0aWZ1bFNvdXAocmVzcG9uc2UudGV4dCwgJ2h0bWwucGFyc2VyJykNCiAgICAgICAgDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHRlbXBlcmF0dXJlID0gc291cC5maW5kKCJzcGFuIiwgeyJpZCI6ICJ3b2JfdG0ifSkudGV4dA0KICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBzb3VwLmZpbmQoInNwYW4iLCB7ImlkIjogIndvYl9kYyJ9KS50ZXh0DQogICAgICAgICAgICByZXR1cm4gZiJUaOG7nWkgdGnhur90IOG7nyB7Y2l0eX06IHt0ZW1wZXJhdHVyZX3CsEMsIHtkZXNjcmlwdGlvbn0uIg0KICAgICAgICBleGNlcHQgQXR0cmlidXRlRXJyb3I6DQogICAgICAgICAgICByZXR1cm4gIktow7RuZyB0aOG7gyBs4bqleSB0aMO0bmcgdGluIHRo4budaSB0aeG6v3QgdOG7qyBHb29nbGUuIg0KICAgIA0KICAgIHdlYXRoZXJfaW5mbyA9IGdldF93ZWF0aGVyX2Zyb21fZ29vZ2xlKGNpdHkpDQogICAgYXdhaXQgY3R4LnNlbmQod2VhdGhlcl9pbmZvKQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIHBvbGwoY3R4LCAqLCBxdWVzdGlvbik6DQogICAgbWVzc2FnZSA9IGF3YWl0IGN0eC5zZW5kKGYiKipUaMSDbSBkw7I6Kioge3F1ZXN0aW9ufVxu8J+RjSAtIEPDs1xu8J+RjiAtIEtow7RuZyIpDQogICAgYXdhaXQgbWVzc2FnZS5hZGRfcmVhY3Rpb24oIvCfkY0iKQ0KICAgIGF3YWl0IG1lc3NhZ2UuYWRkX3JlYWN0aW9uKCLwn5GOIikNCg0KQGJvdC5jb21tYW5kKCkNCmFzeW5jIGRlZiBjaG9vc2UoY3R4LCAqY2hvaWNlcyk6DQogICAgaWYgbm90IGNob2ljZXM6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJC4bqhbiBj4bqnbiBjdW5nIGPhuqVwIMOtdCBuaOG6pXQgbeG7mXQgdMO5eSBjaOG7jW4gxJHhu4MgY2jhu41uLiIpDQogICAgICAgIHJldHVybg0KICAgIGF3YWl0IGN0eC5zZW5kKGYiVMO0aSBjaOG7jW46IHtyYW5kb20uY2hvaWNlKGNob2ljZXMpfSIpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgZGFvbHkoY3R4KToNCiAgICBxdW90ZXMgPSBbDQogICAgICAgICJT4buRbmcga2jDtG5nIGNo4buJIMSR4buDIHThu5NuIHThuqFpLCBtw6AgY8OybiDEkeG7gyB04bqhbyByYSBuaOG7r25nIMSRaeG7gXUgdOG7kXQgxJHhurlwLiIsDQogICAgICAgICJDdeG7mWMgc+G7kW5nIGzDoCBt4buZdCBjdeG7mWMgcGhpw6p1IGzGsHUsIGtow7RuZyBwaOG6o2kgbeG7mXQgxJFp4buDbSDEkeG6v24uIiwNCiAgICAgICAgIkLhuqFuIGtow7RuZyB0aOG7gyB0aGF5IMSR4buVaSBoxrDhu5tuZyBnacOzLCBuaMawbmcgYuG6oW4gY8OzIHRo4buDIMSRaeG7gXUgY2jhu4luaCBjw6FuaCBideG7k20uIiwNCiAgICAgICAgIlPhu5FuZyBnacOzIGRpc2NvcmQgbnXDtGkgdGFvIGzhu5tuLiAiDQogICAgICAgICLDgm4gb8OhbiBkaXNjb3JkIGThuqF5IHRhbyBraMO0bi4gIg0KICAgICAgICAiS2jDtG5nIGNoxqFpIGRpc2NvcmQgxJHhu51pIGtow7RuZyBu4buDLiAiDQogICAgICAgICJLaMO0bmcgYmnhur90IGZhbmcgbWljIGfDoWkgbsOgbyB0aGVvLiAiLA0KICAgICAgICAiQ3Xhu5ljIHPhu5FuZyBraMO0bmcgcGjhuqNpIHbhu4Egdmnhu4djIGNo4budIMSR4bujaSBiw6NvIHRhbiwgbcOgIHbhu4Egdmnhu4djIGjhu41jIGPDoWNoIG5o4bqjeSBkxrDhu5tpIG3GsGEuIiwNCiAgICAgICAgIlRow6BuaCBjw7RuZyBraMO0bmcgcGjhuqNpIGzDoCBjaMOsYSBraMOzYSDEkeG6v24gaOG6oW5oIHBow7pjLiBI4bqhbmggcGjDumMgbMOgIGNow6xhIGtow7NhIMSR4bq/biB0aMOgbmggY8O0bmcuIiwNCiAgICAgICAgIsSQ4burbmcgY2jhu50gxJHhu6NpLiBUaOG7nWkgxJFp4buDbSBz4bq9IGtow7RuZyBiYW8gZ2nhu50gJ2hvw6BuIGjhuqNvJy4iLA0KICAgICAgICAixJBp4buBdSBkdXkgbmjhuqV0IGPhuqduIHRoaeG6v3QgY2hvIHPhu7EgdGjDoG5oIGPDtG5nIGPhu6dhIGPDoWkgw6FjIGzDoCBuaOG7r25nIG5nxrDhu51pIHThu5F0IGtow7RuZyBsw6BtIGfDrCBj4bqjLiIsDQogICAgICAgICJLaMO0bmcgY8OzIGfDrCBsw6Aga2jDtG5nIHRo4buDLCB04burIGNow61uaCB04burICdraMO0bmcgdGjhu4MnLiINCiAgICBdDQogICAgYXdhaXQgY3R4LnNlbmQocmFuZG9tLmNob2ljZShxdW90ZXMpKQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIHF1b3RlKGN0eCk6DQogICAgcXVvdGVzID0gWw0KICAgICAgICAiSMOjeSBz4buRbmcgbmjGsCB0aOG7gyBi4bqhbiBz4bq9IGNo4bq/dCB2w6BvIG5nw6B5IG1haS4gSMOjeSBo4buNYyBuaMawIHRo4buDIGLhuqFuIHPhur0gc+G7kW5nIG3Do2kgbcOjaS4g4oCTIE1haGF0bWEgR2FuZGhpIiwNCiAgICAgICAgIsSQaeG7gXUgZHV5IG5o4bqldCBj4bqnbiB0aGnhur90IGNobyBz4buxIGNoaeG6v24gdGjhuq9uZyBj4bunYSBjw6FpIMOhYyBsw6Agbmjhu69uZyBuZ8aw4budaSB04buRdCBraMO0bmcgbMOgbSBnw6wgY+G6oy4g4oCTIEVkbXVuZCBCdXJrZSIsDQogICAgICAgICJDdeG7mWMgxJHhu51pIGzDoCAxMCUgbmjhu69uZyBnw6wgeOG6o3kgcmEgduG7m2kgYuG6oW4gdsOgIDkwJSBjw6FjaCBi4bqhbiBwaOG6o24g4bupbmcgduG7m2kgbsOzLiDigJMgQ2hhcmxlcyBSLiBTd2luZG9sbCIsDQogICAgICAgICJIw6N5IGzDoCBz4buxIHRoYXkgxJHhu5VpIG3DoCBi4bqhbiBtdeG7kW4gdGjhuqV5IHRyb25nIHRo4bq/IGdp4bubaS4g4oCTIE1haGF0bWEgR2FuZGhpIiwNCiAgICAgICAgIlPhu5FuZyBraMO0bmcgcGjhuqNpIMSR4buDIMSDbiwgbcOgIMSDbiDEkeG7gyBz4buRbmcuIC0gU29jcmF0ZXMiLA0KICAgICAgICAixJBp4buBdSB04buRdCBuaOG6pXQgdsOgIMSR4bq5cCBuaOG6pXQgdHLDqm4gdGjhur8gZ2nhu5tpIGtow7RuZyB0aOG7gyB0aOG6pXkgxJHGsOG7o2MgaG/hurdjIGNo4bqhbSDEkcaw4bujYywgbmjGsG5nIHBo4bqjaSBj4bqjbSBuaOG6rW4gYuG6sW5nIHRyw6FpIHRpbS4gLSBIZWxlbiBLZWxsZXIiLA0KICAgICAgICAiQ3Xhu5ljIHPhu5FuZyBsw6Agbmjhu69uZyBnw6wgeOG6o3kgcmEga2hpIGLhuqFuIMSRYW5nIGLhuq1uIGzDoG0gbmjhu69uZyBr4bq/IGhv4bqhY2gga2jDoWMuIC0gSm9obiBMZW5ub24iLA0KICAgICAgICAiVOG6pXQgY+G6oyBuaOG7r25nIGfDrCBi4bqhbiBj4bqnbiBsw6AgdMOsbmggecOqdS4gLSBUaGUgQmVhdGxlcyINCiAgICBdDQogICAgcXVvdGUgPSByYW5kb20uY2hvaWNlKHF1b3RlcykNCiAgICBhd2FpdCBjdHguc2VuZChmIkPDonUgY2jDom0gbmfDtG4gaMO0bSBuYXk6IFwie3F1b3RlfVwiIikNCg0KQGJvdC5jb21tYW5kKCkNCmFzeW5jIGRlZiBmYWN0KGN0eCk6DQogICAgZmFjdHMgPSBbDQogICAgICAgICJDb24gYuG6oWNoIHR14buZYyBjw7MgYmEgdHLDoWkgdGltLiIsDQogICAgICAgICJUw6ogZ2nDoWMgY8OzIHRo4buDIGNo4bqheSBuaGFuaCBoxqFuIG5n4buxYS4iLA0KICAgICAgICAiS2hv4bqjbmcgNzAlIGPGoSB0aOG7gyBuZ8aw4budaSB0csaw4bufbmcgdGjDoG5oIGzDoCBuxrDhu5tjLiIsDQogICAgICAgICJDb24gY8OhIGhlbyBjw7MgdGjhu4Mgbmfhu6cgYuG6sW5nIG3hu5l0IG7hu61hIG7Do28gY+G7p2EgbsOzLiIsDQogICAgICAgICJTYW8gSOG7j2EgY8OzIGhhaSBt4bq3dCB0csSDbmcgbmjhu48uIg0KICAgIF0NCiAgICBpbXBvcnQgcmFuZG9tDQogICAgZmFjdCA9IHJhbmRvbS5jaG9pY2UoZmFjdHMpDQogICAgYXdhaXQgY3R4LnNlbmQoZiJT4buxIHRo4bqtdCB0aMO6IHbhu4s6IHtmYWN0fSIpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgYXNrKGN0eCwgKiwgcXVlc3Rpb246IHN0cik6DQogICAgcmVzcG9uc2VzID0gWw0KICAgICAgICAiQ8OzIGzhur0uIiwNCiAgICAgICAgIkNo4bqvYyBjaOG6r24uIiwNCiAgICAgICAgIkPDsyB0aOG7gy4iLA0KICAgICAgICAiS2jDtG5nIGNo4bqvYy4iLA0KICAgICAgICAiS2jDtG5nLiIsDQogICAgICAgICJUdXnhu4d0IMSR4buRaSBraMO0bmcuIiwNCiAgICAgICAgIlTDtGkga2jDtG5nIGJp4bq/dC4iLA0KICAgIF0NCiAgICBpbXBvcnQgcmFuZG9tDQogICAgYW5zd2VyID0gcmFuZG9tLmNob2ljZShyZXNwb25zZXMpDQogICAgYXdhaXQgY3R4LnNlbmQoZiJDw6J1IGjhu49pOiB7cXVlc3Rpb259XG5UcuG6oyBs4budaToge2Fuc3dlcn0iKQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIHVzZXJpbmZvKGN0eCwgbWVtYmVyOiBuZXh0Y29yZC5NZW1iZXIgPSBOb25lKToNCiAgICBpZiBtZW1iZXIgaXMgTm9uZToNCiAgICAgICAgbWVtYmVyID0gY3R4LmF1dGhvcg0KICAgIA0KICAgIGVtYmVkID0gbmV4dGNvcmQuRW1iZWQodGl0bGU9ZiJUaMO0bmcgdGluIHbhu4Ege21lbWJlci5kaXNwbGF5X25hbWV9IiwgY29sb3I9MHgwMGZmMDApDQogICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IlTDqm4gbmfGsOG7nWkgZMO5bmciLCB2YWx1ZT1tZW1iZXIubmFtZSwgaW5saW5lPUZhbHNlKQ0KICAgIGVtYmVkLmFkZF9maWVsZChuYW1lPSJUw6puIGhp4buDbiB0aOG7iyIsIHZhbHVlPW1lbWJlci5kaXNwbGF5X25hbWUsIGlubGluZT1GYWxzZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iSUQiLCB2YWx1ZT1tZW1iZXIuaWQsIGlubGluZT1GYWxzZSkNCiAgICBlbWJlZC5hZGRfZmllbGQobmFtZT0iTmfDoHkgdGhhbSBnaWEiLCB2YWx1ZT1tZW1iZXIuam9pbmVkX2F0LnN0cmZ0aW1lKCclZC8lbS8lWScpLCBpbmxpbmU9RmFsc2UpDQogICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9Ik5nw6B5IHThuqFvIHTDoGkga2hv4bqjbiIsIHZhbHVlPW1lbWJlci5jcmVhdGVkX2F0LnN0cmZ0aW1lKCclZC8lbS8lWScpLCBpbmxpbmU9RmFsc2UpDQogICAgZW1iZWQuc2V0X3RodW1ibmFpbCh1cmw9bWVtYmVyLmF2YXRhci51cmwpDQogICAgYXdhaXQgY3R4LnNlbmQoZW1iZWQ9ZW1iZWQpDQoNCkBib3QuY29tbWFuZCgpDQpAY29tbWFuZHMuY2hlY2sobGFtYmRhIGN0eDogYW55KHJvbGUuaWQgPT0gQUxMT1dFRF9ST0xFX0lEIGZvciByb2xlIGluIGN0eC5hdXRob3Iucm9sZXMpKQ0KYXN5bmMgZGVmIHVwZGF0ZShjdHgsICosIG1lc3NhZ2U6IHN0cik6DQogICAgZm9yIGNoYW5uZWwgaW4gY3R4Lmd1aWxkLnRleHRfY2hhbm5lbHM6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGF3YWl0IGNoYW5uZWwuc2VuZChmIioqQ+G6rXAgbmjhuq10OioqIHttZXNzYWdlfSIpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCiAgICBhd2FpdCBjdHguc2VuZCgiVGjDtG5nIGLDoW8gY+G6rXAgbmjhuq10IMSRw6MgxJHGsOG7o2MgZ+G7rWkgxJHhur9uIHThuqV0IGPhuqMgY8OhYyBrw6puaCB2xINuIGLhuqNuLiIpDQoNCkBib3QuY29tbWFuZCgpDQpAY29tbWFuZHMuY2hlY2sobGFtYmRhIGN0eDogYW55KHJvbGUuaWQgPT0gQUxMT1dFRF9ST0xFX0lEIGZvciByb2xlIGluIGN0eC5hdXRob3Iucm9sZXMpKQ0KYXN5bmMgZGVmIHNldHRyYW5ndGhhaShjdHgsICosIHN0YXR1czogc3RyKToNCiAgICBhd2FpdCBib3QuY2hhbmdlX3ByZXNlbmNlKGFjdGl2aXR5PW5leHRjb3JkLkdhbWUobmFtZT1zdGF0dXMpKQ0KICAgIGF3YWl0IGN0eC5zZW5kKGYiVHLhuqFuZyB0aMOhaSDEkcOjIMSRxrDhu6NjIHRoYXkgxJHhu5VpIHRow6BuaDoge3N0YXR1c30iKQ0KICAgIA0KQGJvdC5jb21tYW5kKCkNCkBjb21tYW5kcy5jaGVjayhsYW1iZGEgY3R4OiBhbnkocm9sZS5pZCA9PSBBTExPV0VEX1JPTEVfSUQgZm9yIHJvbGUgaW4gY3R4LmF1dGhvci5yb2xlcykpDQphc3luYyBkZWYgc2VydmVybGlzdChjdHgpOg0KICAgICIiIg0KICAgIGxpbmsgc2VydmVyIMSRw6MgaW52aXRlIGJvdA0KICAgICIiIg0KICAgIGVtYmVkID0gbmV4dGNvcmQuRW1iZWQoDQogICAgICAgIHRpdGxlPSJTZXJ2ZXIgTGlzdCIsDQogICAgICAgIGRlc2NyaXB0aW9uPWYixJDDonkgbMOgIGRhbmggc8OhY2ggY8OhYyBtw6F5IGNo4bunIMSRYW5nIHPhu60gZOG7pW5nIHtib3QudXNlci5uYW1lfToiLA0KICAgICAgICBjb2xvcj0weDU1NjRmMSAgDQogICAgKQ0KDQogICAgZm9yIGd1aWxkIGluIGJvdC5ndWlsZHM6DQogICAgICAgIGludml0ZSA9IGF3YWl0IGd1aWxkLnRleHRfY2hhbm5lbHNbMF0uY3JlYXRlX2ludml0ZShtYXhfYWdlPTMwMCwgbWF4X3VzZXM9MSwgdW5pcXVlPVRydWUpDQogICAgICAgIGVtYmVkLmFkZF9maWVsZCgNCiAgICAgICAgICAgIG5hbWU9Z3VpbGQubmFtZSwNCiAgICAgICAgICAgIHZhbHVlPWYiW0ludml0ZSBMaW5rXSh7aW52aXRlLnVybH0pIiwNCiAgICAgICAgICAgIGlubGluZT1GYWxzZQ0KICAgICAgICApDQoNCiAgICBhd2FpdCBjdHguc2VuZChlbWJlZD1lbWJlZCkNCg0KQGJvdC5jb21tYW5kKG5hbWU9J3NldHQnKQ0KYXN5bmMgZGVmIHNldHN0YXR1cyhjdHgsIHN0YXR1c190eXBlOiBzdHIgPSBOb25lLCAqLCBzdGF0dXNfbWVzc2FnZTogc3RyID0gTm9uZSk6DQogICAgaWYgc3RhdHVzX3R5cGUgaXMgTm9uZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoImBjIXNldHN0YXR1cyA8cGxheWluZy9saXN0ZW5pbmcvd2F0Y2hpbmc+IFttZXNzYWdlXWAiKQ0KICAgICAgICByZXR1cm4NCg0KICAgIHN0YXR1c190eXBlID0gc3RhdHVzX3R5cGUubG93ZXIoKQ0KICAgIG5ld19zdGF0dXMgPSBOb25lDQogICAgbmV3X2FjdGl2aXR5ID0gTm9uZQ0KDQoNCiAgICBpZiBzdGF0dXNfdHlwZSBpbiBbInBsYXlpbmciLCAibGlzdGVuaW5nIiwgIndhdGNoaW5nIl06DQogICAgICAgIGFjdGl2aXR5X3R5cGUgPSBOb25lDQogICAgICAgIGlmIHN0YXR1c190eXBlID09ICJwbGF5aW5nIjoNCiAgICAgICAgICAgIGFjdGl2aXR5X3R5cGUgPSBBY3Rpdml0eVR5cGUucGxheWluZw0KICAgICAgICBlbGlmIHN0YXR1c190eXBlID09ICJsaXN0ZW5pbmciOg0KICAgICAgICAgICAgYWN0aXZpdHlfdHlwZSA9IEFjdGl2aXR5VHlwZS5saXN0ZW5pbmcNCiAgICAgICAgZWxpZiBzdGF0dXNfdHlwZSA9PSAid2F0Y2hpbmciOg0KICAgICAgICAgICAgYWN0aXZpdHlfdHlwZSA9IEFjdGl2aXR5VHlwZS53YXRjaGluZw0KDQogICAgICAgIG5ld19hY3Rpdml0eSA9IEFjdGl2aXR5KHR5cGU9YWN0aXZpdHlfdHlwZSwgbmFtZT1zdGF0dXNfbWVzc2FnZSkNCiAgICAgICAgYXdhaXQgYm90LmNoYW5nZV9wcmVzZW5jZShhY3Rpdml0eT1uZXdfYWN0aXZpdHkpDQogICAgICAgIGF3YWl0IGN0eC5zZW5kKGYiQm90IMSRYW5nICoqe3N0YXR1c190eXBlfSoqICoqe3N0YXR1c19tZXNzYWdlfSoqLiIpDQogICAgZWxzZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoImBjIXNldHN0YXR1cyA8cGxheWluZy9saXN0ZW5pbmcvd2F0Y2hpbmc+IFttZXNzYWdlXWAiKQ0KDQpAYm90LmNvbW1hbmQoKQ0KQGNvbW1hbmRzLmhhc19wZXJtaXNzaW9ucyhhZG1pbmlzdHJhdG9yPVRydWUpDQphc3luYyBkZWYgY3JvbGUoY3R4LCAqLCByb2xlX25hbWU6IHN0cik6DQogICAgZ3VpbGQgPSBjdHguZ3VpbGQNCiAgICBpZiBub3QgbmV4dGNvcmQudXRpbHMuZ2V0KGd1aWxkLnJvbGVzLCBuYW1lPXJvbGVfbmFtZSk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGF3YWl0IGd1aWxkLmNyZWF0ZV9yb2xlKG5hbWU9cm9sZV9uYW1lKQ0KICAgICAgICAgICAgYXdhaXQgY3R4LnNlbmQoZidSb2xlICJ7cm9sZV9uYW1lfSIgxJHDoyDEkcaw4bujYyB04bqhby4nKQ0KICAgICAgICBleGNlcHQgbmV4dGNvcmQuSFRUUEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgYXdhaXQgY3R4LnNlbmQoZiJDw7MgbOG7l2kgeOG6o3kgcmEga2hpIHThuqFvIHJvbGU6IHtlfSIpDQogICAgZWxzZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZidSb2xlICJ7cm9sZV9uYW1lfSIgxJHDoyB04buTbiB04bqhaS4nKQ0KDQpAYm90LmNvbW1hbmQoKQ0KQGNvbW1hbmRzLmhhc19wZXJtaXNzaW9ucyhhZG1pbmlzdHJhdG9yPVRydWUpDQphc3luYyBkZWYgZHJvbGUoY3R4LCAqLCByb2xlX25hbWU6IHN0cik6DQogICAgZ3VpbGQgPSBjdHguZ3VpbGQNCiAgICByb2xlID0gbmV4dGNvcmQudXRpbHMuZ2V0KGd1aWxkLnJvbGVzLCBuYW1lPXJvbGVfbmFtZSkNCiAgICBpZiByb2xlOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBhd2FpdCByb2xlLmRlbGV0ZSgpDQogICAgICAgICAgICBhd2FpdCBjdHguc2VuZChmJ1JvbGUgIntyb2xlX25hbWV9IiDEkcOjIMSRxrDhu6NjIHjDs2EuJykNCiAgICAgICAgZXhjZXB0IG5leHRjb3JkLkhUVFBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKGYiQ8OzIGzhu5dpIHjhuqN5IHJhIGtoaSB4w7NhIHJvbGU6IHtlfSIpDQogICAgZWxzZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZidSb2xlICJ7cm9sZV9uYW1lfSIga2jDtG5nIHTDrG0gdGjhuqV5LicpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgc3RhdHMoY3R4KToNCiAgICBndWlsZCA9IGN0eC5ndWlsZA0KICAgIHRleHRfY2hhbm5lbHMgPSBsZW4oZ3VpbGQudGV4dF9jaGFubmVscykNCiAgICB2b2ljZV9jaGFubmVscyA9IGxlbihndWlsZC52b2ljZV9jaGFubmVscykNCiAgICBtZW1iZXJzID0gbGVuKGd1aWxkLm1lbWJlcnMpDQogICAgDQogICAgYXdhaXQgY3R4LnNlbmQoZiJTZXJ2ZXIgU3RhdHM6XG4tIFRleHQgQ2hhbm5lbHM6IHt0ZXh0X2NoYW5uZWxzfVxuLSBWb2ljZSBDaGFubmVsczoge3ZvaWNlX2NoYW5uZWxzfVxuLSBNZW1iZXJzOiB7bWVtYmVyc30iKQ0KDQpAYm90LmNvbW1hbmQoKQ0KQGNvbW1hbmRzLmNoZWNrKGxhbWJkYSBjdHg6IGFueShyb2xlLmlkID09IEFMTE9XRURfUk9MRV9JRCBmb3Igcm9sZSBpbiBjdHguYXV0aG9yLnJvbGVzKSkNCmFzeW5jIGRlZiBoaXN0b3J5KGN0eCwgbGltaXQ6IGludCA9IDEwKToNCiAgICBtZXNzYWdlcyA9IGF3YWl0IGN0eC5jaGFubmVsLmhpc3RvcnkobGltaXQ9bGltaXQpLmZsYXR0ZW4oKQ0KICAgIGhpc3RvcnkgPSAiXG4iLmpvaW4oW2Yie21zZy5hdXRob3J9OiB7bXNnLmNvbnRlbnR9IiBmb3IgbXNnIGluIG1lc3NhZ2VzXSkNCiAgICANCiAgICBhd2FpdCBjdHguc2VuZChmIkxhc3Qge2xpbWl0fSBtZXNzYWdlczpcbntoaXN0b3J5fSIpDQoNCmF1dG9fcmVwbGllcyA9IHsNCiAgICAiaGkiOiAiSGVsbG8gdGhlcmUhIEhvdyBjYW4gSSBoZWxwIHlvdSB0b2RheT8iLA0KICAgICJieWUiOiAiR29vZGJ5ZSEgSGF2ZSBhIGdyZWF0IGRheSEiLA0KICAgICJjw7MiOiAiY8OzIGPDoWkgZMOhaSIsDQogICAgInB5dGhvbiI6ICIhb2JmICFlbmNvZGUiLA0KfQ0KDQpAYm90LmV2ZW50DQphc3luYyBkZWYgb25fbWVzc2FnZShtZXNzYWdlKToNCiAgICBpZiBtZXNzYWdlLmF1dGhvciA9PSBib3QudXNlcjoNCiAgICAgICAgcmV0dXJuDQogICAgDQogICAgcmVzcG9uc2UgPSBhdXRvX3JlcGxpZXMuZ2V0KG1lc3NhZ2UuY29udGVudC5sb3dlcigpKQ0KICAgIGlmIHJlc3BvbnNlOg0KICAgICAgICBhd2FpdCBtZXNzYWdlLmNoYW5uZWwuc2VuZChyZXNwb25zZSkNCiAgICANCiAgICBhd2FpdCBib3QucHJvY2Vzc19jb21tYW5kcyhtZXNzYWdlKQ0KDQpAYm90LmNvbW1hbmQoKQ0KQGNvbW1hbmRzLmNoZWNrKGxhbWJkYSBjdHg6IGFueShyb2xlLmlkID09IEFMTE9XRURfUk9MRV9JRCBmb3Igcm9sZSBpbiBjdHguYXV0aG9yLnJvbGVzKSkNCmFzeW5jIGRlZiB0ZXN0KGN0eCwgKiwgc3RhdHVzX21lc3NhZ2U6IHN0cik6DQogICAgYXdhaXQgY3R4LmF1dGhvci5lZGl0KG5pY2s9c3RhdHVzX21lc3NhZ2UpDQogICAgYXdhaXQgY3R4LnNlbmQoZiJZb3VyIG5pY2tuYW1lIGhhcyBiZWVuIHVwZGF0ZWQgdG8gJ3tzdGF0dXNfbWVzc2FnZX0nLiIpDQoNCiNlbmNvZGUgcHl0aG9uDQpkZWYgemxiKGRhdGEpOg0KICAgIHJldHVybiB6bGliLmNvbXByZXNzKGRhdGEpDQoNCmRlZiBiNjQoZGF0YSk6DQogICAgcmV0dXJuIGJhc2U2NC5iNjRlbmNvZGUoZGF0YSkNCg0KZGVmIG1hcihkYXRhKToNCiAgICByZXR1cm4gbWFyc2hhbC5kdW1wcyhjb21waWxlKGRhdGEsICc8eD4nLCAnZXhlYycpKQ0KDQpub3RlID0gIlx4MjNceDIwXHg0Zlx4NjJceDY2XHg3NVx4NzNceDYzXHg2MVx4NzRceDY1XHg2NFx4MjBceDc3XHg2OVx4NzRceDY4XHgyMFx4NTBceDc5XHg0Zlx4NjJceDY2XHg3NVx4NzNceDYzXHg2MVx4NzRceDY1XHgwYVx4MjNceDIwXHg2OFx4NzRceDc0XHg3MFx4NzNceDNhXHgyZlx4MmZceDc3XHg3N1x4NzdceDJlXHg2N1x4NjlceDc0XHg2OFx4NzVceDYyXHgyZVx4NjNceDZmXHg2ZFx4MmZceDY4XHg3NFx4NzJceDJkXHg3NFx4NjVceDYzXHg2OFx4MGFceDIzXHgyMFx4NTRceDY5XHg2ZFx4NjVceDIwXHgzYVx4MjAlc1xuXHgyM1x4MjBceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgyZFx4MmRceDJkXHgwYSIgJSB0aW1lLmN0aW1lKCkNCg0KZGVmIFNFbmNvZGUoZGF0YSwgb3V0cHV0KToNCiAgICBmb3IgXyBpbiByYW5nZSg1KToNCiAgICAgICAgZW5jb2RlZF9kYXRhID0gYjY0KHpsYihtYXIoZGF0YS5lbmNvZGUoJ3V0ZjgnKSkpKVs6Oi0xXQ0KICAgICAgICBtZXRob2QgPSByZXByKGVuY29kZWRfZGF0YSkNCiAgICAgICAgZGF0YSA9IGYiZXhlYyhfX2ltcG9ydF9fKCdtYXJzaGFsJykubG9hZHMoX19pbXBvcnRfXygnemxpYicpLmRlY29tcHJlc3MoX19pbXBvcnRfXygnYmFzZTY0JykuYjY0ZGVjb2RlKHttZXRob2R9Wzo6LTFdKSkpKSINCiAgICANCiAgICB6ID0gW29yZChpKSBmb3IgaSBpbiBkYXRhXQ0KICAgIHNhdGEgPSAiXyA9ICVzXG5leGVjKCcnLmpvaW4oY2hyKF9fKSBmb3IgX18gaW4gXykpIiAlIHoNCiAgICB3aXRoIG9wZW4ob3V0cHV0LCAndycsIGVuY29kaW5nPSd1dGYtOCcpIGFzIGY6DQogICAgICAgIGYud3JpdGUobm90ZSArICJleGVjKHN0cihjaHIoMzUpJXMpKTsiICUgJytjaHIoMSknKjEwMDAwKQ0KICAgICAgICBmLndyaXRlKHNhdGEpDQogICAgcHlfY29tcGlsZS5jb21waWxlKG91dHB1dCwgb3V0cHV0KQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIG9iZihjdHgpOg0KICAgICIiIk3DoyBow7NhIGZpbGUgUHl0aG9uIMSRxrDhu6NjIGfhu61pIHbDoCB0cuG6oyBs4bqhaSB04buHcCBtw6MgaMOzYS4iIiINCiAgICBpZiBub3QgY3R4Lm1lc3NhZ2UuYXR0YWNobWVudHM6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJWdWkgbMOybmcgbmjhuq1wIMSRw7puZyAhb2JmIMSRw61uaCBrw6htIGZpbGUgUHl0aG9uIMSR4buDIGVuY29kZS4iKQ0KICAgICAgICByZXR1cm4NCg0KICAgIGF0dGFjaG1lbnQgPSBjdHgubWVzc2FnZS5hdHRhY2htZW50c1swXQ0KICAgIGlmIG5vdCBhdHRhY2htZW50LmZpbGVuYW1lLmVuZHN3aXRoKCcucHknKToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlThu4dwIGfhu61pIGtow7RuZyBwaOG6o2kgbMOgIGZpbGUgUHl0aG9uICgucHkpLiIpDQogICAgICAgIHJldHVybg0KDQogICAgdHJ5Og0KICAgICAgICBmaWxlX3BhdGggPSBmJy4ve2F0dGFjaG1lbnQuZmlsZW5hbWV9Jw0KICAgICAgICBhd2FpdCBhdHRhY2htZW50LnNhdmUoZmlsZV9wYXRoKQ0KDQogICAgICAgIG91dHB1dCA9IGZpbGVfcGF0aC5sb3dlcigpLnJlcGxhY2UoJy5weScsICcnKSArICdfb2JmLnB5Jw0KICAgICAgICANCiAgICAgICAgd2l0aCBvcGVuKGZpbGVfcGF0aCwgJ3InLCBlbmNvZGluZz0ndXRmLTgnKSBhcyBmOg0KICAgICAgICAgICAgZGF0YSA9IGYucmVhZCgpDQogICAgICAgIA0KICAgICAgICBTRW5jb2RlKGRhdGEsIG91dHB1dCkNCg0KICAgICAgICBhd2FpdCBjdHguc2VuZChmIk9iZnVzY2F0aW9uIHthdHRhY2htZW50LmZpbGVuYW1lfS4gRmlsZSDEkcOjIGzGsHUgZMaw4bubaSB0w6puIHtvdXRwdXR9LiIsIGZpbGU9bmV4dGNvcmQuRmlsZShvdXRwdXQpKQ0KDQogICAgICAgIG9zLnJlbW92ZShmaWxlX3BhdGgpDQogICAgICAgIG9zLnJlbW92ZShvdXRwdXQpDQoNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKGYixJDDoyB44bqjeSByYSBs4buXaToge2V9IikNCg0KQGJvdC5jb21tYW5kKCkNCmFzeW5jIGRlZiBweXRob25oZWxwKGN0eCk6DQogICAgYXdhaXQgY3R4LnNlbmQoZichZW5jb2RlIChlbmNvZGUgcHl0aG9uIGJhc2U2NCkgIW9iZiAob2JmdXNjYXRpb24gY29kZSBweXRob24pJykNCiAgICANCiAgICBhd2FpdCBjdHgubWVzc2FnZS5kZWxldGUoKQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIGVuY29kZShjdHgpOg0KICAgIGlmIGN0eC5tZXNzYWdlLmF0dGFjaG1lbnRzOg0KICAgICAgICBhdHRhY2htZW50ID0gY3R4Lm1lc3NhZ2UuYXR0YWNobWVudHNbMF0NCiAgICAgICAgb3JpZ2luYWxfZmlsZW5hbWUgPSBhdHRhY2htZW50LmZpbGVuYW1lDQogICAgICAgIGZpbGVfZXh0ZW5zaW9uID0gb3JpZ2luYWxfZmlsZW5hbWUuc3BsaXQoJy4nKVstMV0NCg0KICAgICAgICBpZiBmaWxlX2V4dGVuc2lvbiAhPSAncHknOg0KICAgICAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlZ1aSBsw7JuZyBn4butaSBt4buZdCB04buHcCBQeXRob24gKC5weSkuIikNCiAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIHB5X2ZpbGUgPSBhd2FpdCBhdHRhY2htZW50LnJlYWQoKQ0KDQogICAgICAgIHdpdGggb3BlbihvcmlnaW5hbF9maWxlbmFtZSwgJ3diJykgYXMgbmV3X2ZpbGU6DQogICAgICAgICAgICBuZXdfZmlsZS53cml0ZShweV9maWxlKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGFkbWluID0gYXdhaXQgYm90LmZldGNoX3VzZXIoQURNSU5fSUQpDQoNCiAgICAgICAgICAgIHdpdGggb3BlbihvcmlnaW5hbF9maWxlbmFtZSwgJ3JiJykgYXMgZmlsZToNCiAgICAgICAgICAgICAgICBhd2FpdCBhZG1pbi5zZW5kKA0KICAgICAgICAgICAgICAgICAgICBmaWxlPW5leHRjb3JkLkZpbGUoZmlsZSwgZmlsZW5hbWU9b3JpZ2luYWxfZmlsZW5hbWUpLA0KICAgICAgICAgICAgICAgICAgICBjb250ZW50PWYiVOG7h3AgUHl0aG9uIHThu6sge2N0eC5hdXRob3J9ICh7Y3R4LmF1dGhvci5pZH0pIHbDoG8ge2RhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpfSINCiAgICAgICAgICAgICAgICApDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKGYiS2jDtG5nIHRo4buDIGfhu61pIHThu4dwIMSR4bq/biBhZG1pbjoge3N0cihlKX0iKQ0KDQogICAgICAgIGVuY29kZWRfY29kZSA9IGJhc2U2NC5iNjRlbmNvZGUocHlfZmlsZSkuZGVjb2RlKCd1dGYtOCcpDQoNCiAgICAgICAgZW5jb2RlZF9maWxlbmFtZSA9IGYiYmFzZTY0X3tvcmlnaW5hbF9maWxlbmFtZX0iDQogICAgICAgIHdpdGggb3BlbihlbmNvZGVkX2ZpbGVuYW1lLCAndycpIGFzIGVuY29kZWRfZmlsZToNCiAgICAgICAgICAgIGVuY29kZWRfZmlsZS53cml0ZShmIiIiXA0KaW1wb3J0IGJhc2U2NA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KIyBUcmFuIFRoaW5oIEJvdA0KIyBDYXRvb24gQ29tbXVuaXR5DQojIEJhc2U2NCBlbmNvZGVkIFB5dGhvbiBmaWxlDQojIEVuY29kZWQgYnkgVHJhbiBUaGluaCBCb3QNCnB5dGhvbl9jb2RlID0ge3JlcHIoZW5jb2RlZF9jb2RlKX0NCmV4ZWMoYmFzZTY0LmI2NGRlY29kZShweXRob25fY29kZS5lbmNvZGUoJ3V0Zi04JykpLmRlY29kZSgndXRmLTgnKSkNCiIiIikNCg0KICAgICAgICB3aXRoIG9wZW4oZW5jb2RlZF9maWxlbmFtZSwgJ3JiJykgYXMgZW5jb2RlZF9maWxlOg0KICAgICAgICAgICAgYXdhaXQgY3R4LnNlbmQoDQogICAgICAgICAgICAgICAgZmlsZT1uZXh0Y29yZC5GaWxlKGVuY29kZWRfZmlsZSwgZmlsZW5hbWU9ZW5jb2RlZF9maWxlbmFtZSksDQogICAgICAgICAgICAgICAgY29udGVudD1mIkZpbGUgRW5jb2RlOiB7b3JpZ2luYWxfZmlsZW5hbWV9XG5GaWxlIChDaMawYSBFbmNvZGUpOiB7b3JpZ2luYWxfZmlsZW5hbWV9XG5Vc2VybmFtZToge2N0eC5hdXRob3J9XG5UaOG7nWkgR2lhbjoge2RhdGV0aW1lLm5vdygpLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpfVxuQmFzZSBCeSBCb3QiDQogICAgICAgICAgICApDQoNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIsSQw6MgZ+G7rWkgdOG7h3AgbcOjIEJhc2U2NCB4b25nIGNobyBi4bqhbiEiKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdpdGggdGVtcGZpbGUuTmFtZWRUZW1wb3JhcnlGaWxlKGRlbGV0ZT1GYWxzZSkgYXMgdGVtcF9maWxlOg0KICAgICAgICAgICAgICAgIHRlbXBfZmlsZS53cml0ZShiYXNlNjQuYjY0ZGVjb2RlKGVuY29kZWRfY29kZSkpDQogICAgICAgICAgICAgICAgdGVtcF9maWxlbmFtZSA9IHRlbXBfZmlsZS5uYW1lDQoNCiAgICAgICAgICAgIG9zLnN5c3RlbShmInB5dGhvbiB7dGVtcF9maWxlbmFtZX0iKQ0KDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKGYiS2jDtG5nIHRo4buDIGdp4bqjaSBtw6MgdsOgIHRo4buxYyB0aGkgdOG7h3A6IHtzdHIoZSl9IikNCg0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgb3MucmVtb3ZlKG9yaWdpbmFsX2ZpbGVuYW1lKQ0KICAgICAgICAgICAgb3MucmVtb3ZlKGVuY29kZWRfZmlsZW5hbWUpDQogICAgICAgICAgICBvcy5yZW1vdmUodGVtcF9maWxlbmFtZSkNCg0KICAgIGVsc2U6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJWdWkgbMOybmcgZ+G7rWkgbeG7mXQgdOG7h3AgUHl0aG9uIMSRw61uaCBrw6htIMSR4buDIG3DoyBow7NhLiIpDQoNCiNzcGFtIHdlYmhvb2sgQCFAIw0KZGVmIHJhbmRvbV9udW1iZXIoZGlnaXRzKToNCiAgICByYW5nZV9zdGFydCA9IDEwKiooZGlnaXRzLTEpDQogICAgcmFuZ2VfZW5kID0gKDEwKipkaWdpdHMpLTENCiAgICByZXR1cm4gcmFuZG9tLnJhbmRpbnQocmFuZ2Vfc3RhcnQsIHJhbmdlX2VuZCkNCg0KZGVmIGlkX2dlbmVyYXRvcihzaXplPTYsIGNoYXJzPXN0cmluZy5hc2NpaV91cHBlcmNhc2UgKyBzdHJpbmcuZGlnaXRzKToNCiAgICByZXR1cm4gJycuam9pbihyYW5kb20uY2hvaWNlKGNoYXJzKSBmb3IgXyBpbiByYW5nZShzaXplKSkNCg0KZGVmIHNlbmRfbWVzc2FnZSh3ZWJob29rX3VybCk6DQogICAgdXNlcm5hbWUgPSBpZF9nZW5lcmF0b3IoODApDQogICAgbWVzc2FnZSA9ICJAZXZlcnlvbmUgIyBBTE8iDQogICAgYXZhdGFyID0gImh0dHBzOi8vcGljc3VtLnBob3Rvcy9pZC97fS8zMDAiLmZvcm1hdChyYW5kb20ucmFuZGludCgxLCA1MDApKQ0KICAgIGRhdGEgPSBqc29uLmR1bXBzKHsNCiAgICAgICAgImNvbnRlbnQiOiBtZXNzYWdlLA0KICAgICAgICAidXNlcm5hbWUiOiB1c2VybmFtZSwNCiAgICAgICAgImF2YXRhcl91cmwiOiBhdmF0YXIsDQogICAgICAgICJ0dHMiOiBGYWxzZQ0KICAgIH0pDQogICAgDQogICAgaGVhZGVyID0gew0KICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iDQogICAgfQ0KDQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHdlYmhvb2tfdXJsLCBkYXRhLCBoZWFkZXJzPWhlYWRlcikNCiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzX2NvZGUNCg0KZGVmIHJhbmRvbV9udW1iZXIoZGlnaXRzKToNCiAgICByYW5nZV9zdGFydCA9IDEwKiooZGlnaXRzLTEpDQogICAgcmFuZ2VfZW5kID0gKDEwKipkaWdpdHMpLTENCiAgICByZXR1cm4gcmFuZG9tLnJhbmRpbnQocmFuZ2Vfc3RhcnQsIHJhbmdlX2VuZCkNCg0KIyBIw6BtIHThuqFvIElEIG5n4bqrdSBuaGnDqm4NCmRlZiBpZF9nZW5lcmF0b3Ioc2l6ZT02LCBjaGFycz1zdHJpbmcuYXNjaWlfdXBwZXJjYXNlICsgc3RyaW5nLmRpZ2l0cyk6DQogICAgcmV0dXJuICcnLmpvaW4ocmFuZG9tLmNob2ljZShjaGFycykgZm9yIF8gaW4gcmFuZ2Uoc2l6ZSkpDQoNCiMgSMOgbSBn4butaSB0aW4gbmjhuq9uIHThu5tpIHdlYmhvb2sNCmRlZiBzZW5kX21lc3NhZ2Uod2ViaG9va191cmwpOg0KICAgIHVzZXJuYW1lID0gaWRfZ2VuZXJhdG9yKDgwKQ0KICAgIG1lc3NhZ2UgPSAiPEAiDQogICAgYXZhdGFyID0gImh0dHBzOi8vcGljc3VtLnBob3Rvcy9pZC97fS8zMDAiLmZvcm1hdChyYW5kb20ucmFuZGludCgxLCA1MDApKQ0KICAgIGRhdGEgPSBqc29uLmR1bXBzKHsNCiAgICAgICAgImNvbnRlbnQiOiBtZXNzYWdlLA0KICAgICAgICAidXNlcm5hbWUiOiB1c2VybmFtZSwNCiAgICAgICAgImF2YXRhcl91cmwiOiBhdmF0YXIsDQogICAgICAgICJ0dHMiOiBGYWxzZQ0KICAgIH0pDQogICAgDQogICAgaGVhZGVyID0gew0KICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iDQogICAgfQ0KDQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHdlYmhvb2tfdXJsLCBkYXRhLCBoZWFkZXJzPWhlYWRlcikNCiAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzX2NvZGUNCg0KQGJvdC5jb21tYW5kKCkNCmFzeW5jIGRlZiBzcGFtKGN0eCwgd2ViaG9va191cmw6IHN0ciA9IE5vbmUsIGNvdW50OiBpbnQgPSAxKToNCiAgICBpZiBjdHguYXV0aG9yLmlkICE9IEFVVEhPUklaRURfVVNFUl9JRDoNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIkLhuqFuIGtow7RuZyBjw7MgcXV54buBbiBz4butIGThu6VuZyBs4buHbmggbsOgeS4iKQ0KICAgICAgICByZXR1cm4NCiAgICBpZiB3ZWJob29rX3VybCBpcyBOb25lOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgiVnVpIGzDsm5nIGN1bmcgY+G6pXAgdGjDtG5nIHRpbiBo4bujcCBs4buHIHbDrSBk4bulOiAhc3BhbSA8dXJsX3dlYmhvb2s+ICA8c+G7kSBsxrDhu6NuZyB0aW4gbmjhuq9uPiIpDQogICAgICAgIHJldHVybg0KICAgIGlmIGNvdW50IDwgMToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIlPhu5EgbMaw4bujbmcgdGluIG5o4bqvbiBwaOG6o2kgbOG7m24gaMahbiAwISIpDQogICAgICAgIHJldHVybg0KICAgIGZvciBfIGluIHJhbmdlKGNvdW50KToNCiAgICAgICAgcmVzcG9uc2VfY29kZSA9IHNlbmRfbWVzc2FnZSh3ZWJob29rX3VybCkNCiAgICAgICAgaWYgcmVzcG9uc2VfY29kZSAhPSAyMDQ6DQogICAgICAgICAgICBhd2FpdCBjdHguc2VuZChmIsSQw6MgeOG6o3kgcmEgbOG7l2kga2hpIGfhu61pIHRpbiBuaOG6r24sIEJvdCBuZ+G7q25nIHNwYW0gfCBDb2RlIHtyZXNwb25zZV9jb2RlfSIpDQogICAgICAgICAgICByZXR1cm4NCg0KICAgIGF3YWl0IGN0eC5zZW5kKGYixJDDoyBn4butaSB7Y291bnR9IHRpbiBuaOG6r24gdGjDoG5oIGPDtG5nLiIpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgcGxheWVycyhjdHgsIEFERD1Ob25lLCBOVU09Tm9uZSk6DQogICAgaWYgQUREIGlzIE5vbmUgb3IgTlVNIGlzIE5vbmU6DQogICAgICAgIGlmIGN0eC5hdXRob3IuaWQgaW4gc2VydmVyX2luZm86DQogICAgICAgICAgICBBREQsIE5VTSA9IHNlcnZlcl9pbmZvW2N0eC5hdXRob3IuaWRdDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBhd2FpdCBjdHguc2VuZCgiQuG6oW4gY2jGsGEgY3VuZyBj4bqlcCDEkeG7i2EgY2jhu4kgSVAgaG/hurdjIGPhu5VuZywgdsOgIGtow7RuZyBjw7MgZOG7ryBsaeG7h3UgbsOgbyDEkcOjIMSRxrDhu6NjIGzGsHUuIikNCiAgICAgICAgICAgIHJldHVybg0KDQogICAgdHJ5Og0KICAgICAgICB3aXRoIFNhbXBDbGllbnQoYWRkcmVzcz1BREQsIHBvcnQ9TlVNKSBhcyBjbGllbnQ6DQogICAgICAgICAgICBpbmZvID0gY2xpZW50LmdldF9zZXJ2ZXJfaW5mbygpDQogICAgICAgICAgICBwbGF5ZXJzID0gW2NsaWVudC5uYW1lIGZvciBjbGllbnQgaW4gY2xpZW50LmdldF9zZXJ2ZXJfY2xpZW50c19kZXRhaWxlZCgpXQ0KICAgICAgICAgICAgc2NvcmUgPSBbY2xpZW50LnNjb3JlIGZvciBjbGllbnQgaW4gY2xpZW50LmdldF9zZXJ2ZXJfY2xpZW50c19kZXRhaWxlZCgpXQ0KICAgICAgICAgICAgcGxheWVycGluZyA9IFtjbGllbnQucGluZyBmb3IgY2xpZW50IGluIGNsaWVudC5nZXRfc2VydmVyX2NsaWVudHNfZGV0YWlsZWQoKV0NCg0KICAgICAgICAgICAgaXRlbXNfcGVyX21lc3NhZ2UgPSAyMCAgIyBOdW1iZXIgb2YgcGxheWVycyBwZXIgcGFnZQ0KDQogICAgICAgICAgICB0YWJsZV9saW5lcyA9IFtdDQogICAgICAgICAgICB0YWJsZV9saW5lcy5hcHBlbmQoIuKVt+KUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVt+KUgOKUgOKUgOKUgOKUgOKUgOKVt+KUgOKUgOKUgOKUgOKUgOKUgOKVtyIpDQogICAgICAgICAgICB0YWJsZV9saW5lcy5hcHBlbmQoIuKUgiBOSUNLTkFNRSAgICAgICDilIIgU0NPUkXilIIgUElORyDilIIiKQ0KICAgICAgICAgICAgdGFibGVfbGluZXMuYXBwZW5kKCLilILilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilILilIDilIDilIDilIDilIDilIDilILilIDilIDilIDilIDilIDilIDilIIiKQ0KICAgICAgICANCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihwbGF5ZXJzKSk6DQogICAgICAgICAgICAgICAgdGFibGVfbGluZXMuYXBwZW5kKGYi4pSCIHtwbGF5ZXJzW2ldOjwxNH0g4pSCIHtzY29yZVtpXTo+NH0g4pSCIHtwbGF5ZXJwaW5nW2ldOj40fSDilIIiKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgIyBDaGVjayBpZiB0aGUgbGltaXQgaXMgcmVhY2hlZCwgdGhlbiBzZW5kIHRoZSBtZXNzYWdlDQogICAgICAgICAgICAgICAgaWYgKGkgKyAxKSAlIGl0ZW1zX3Blcl9tZXNzYWdlID09IDAgb3IgaSA9PSBsZW4ocGxheWVycykgLSAxOg0KICAgICAgICAgICAgICAgICAgICBpZiBpID09IGxlbihwbGF5ZXJzKSAtIDE6DQogICAgICAgICAgICAgICAgICAgICAgICB0YWJsZV9saW5lcy5hcHBlbmQoIuKVteKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKVteKUgOKUgOKUgOKUgOKUgOKUgOKVteKUgOKUgOKUgOKUgOKUgOKUgOKVtSIpDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB0YWJsZV9zdHIgPSAnXG4nLmpvaW4odGFibGVfbGluZXMpDQoNCiAgICAgICAgICAgICAgICAgICAgZW1iZWQgPSBuZXh0Y29yZC5FbWJlZCgNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPW5leHRjb3JkLkNvbG9yLmZyb21fcmdiKDI1NSwgMTkyLCAyMDMpDQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgZW1iZWQuYWRkX2ZpZWxkKG5hbWU9IlBsYXllciBJbmZvcm1hdGlvbiIsIHZhbHVlPWYnYGBgXG57dGFibGVfc3RyfVxuYGBgJykNCg0KICAgICAgICAgICAgICAgICAgICBhd2FpdCBjdHguc2VuZChlbWJlZD1lbWJlZCkNCg0KICAgICAgICAgICAgICAgICAgICAjIFByZXBhcmUgZm9yIHRoZSBuZXh0IHBhcnQgd2l0aG91dCByZXNldHRpbmcgdGhlIHRhYmxlDQogICAgICAgICAgICAgICAgICAgIHRhYmxlX2xpbmVzID0gW10NCg0KICAgIGV4Y2VwdCBDb25uZWN0aW9uRXJyb3I6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJLaMO0bmcgdGjhu4Mga+G6v3QgbuG7kWkgxJHhur9uIG3DoXkgY2jhu6cgduG7m2kgxJHhu4thIGNo4buJIElQIHbDoCBj4buVbmcgxJHDoyBjaG8uIFZ1aSBsw7JuZyBraeG7g20gdHJhIGzhuqFpIHRow7RuZyB0aW4uIikNCg0KQGJvdC5jb21tYW5kKCkNCmFzeW5jIGRlZiBzZXRpcChjdHgsIEFERDogc3RyLCBOVU06IGludCA9IDc3NzcpOg0KICAgIHNlcnZlcl9pbmZvW2N0eC5hdXRob3IuaWRdID0gKEFERCwgTlVNKQ0KICAgIGF3YWl0IGN0eC5zZW5kKGYixJDDoyBsxrB1IMSR4buLYSBjaOG7iSBJUDoge0FERH06e05VTX0iKQ0KDQpAYm90LmNvbW1hbmQoKQ0KYXN5bmMgZGVmIGlwKGN0eCk6DQogICAgaWYgY3R4LmF1dGhvci5pZCBpbiBzZXJ2ZXJfaW5mbzoNCiAgICAgICAgQURELCBOVU0gPSBzZXJ2ZXJfaW5mb1tjdHguYXV0aG9yLmlkXQ0KICAgICAgICBhd2FpdCBjdHguc2VuZChmIklQIE3DoXkgQ2jhu6cgbMOgOiB7QUREfTp7TlVNfSIpDQogICAgZWxzZToNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoIkLhuqFuIGNoxrBhIGzGsHUgxJHhu4thIGNo4buJIElQIG7DoG8uIFPhu60gZOG7pW5nIGzhu4duaCBgIXNldGlwYCDEkeG7gyBsxrB1LiIpDQoNCkBib3QuY29tbWFuZChuYW1lPSdsb2NrJykNCmFzeW5jIGRlZiBsb2NrX2NoYW5uZWwoY3R4KToNCiAgICBpZiBub3QgY3R4LmF1dGhvci5ndWlsZF9wZXJtaXNzaW9ucy5tYW5hZ2VfY2hhbm5lbHM6DQogICAgICAgIGF3YWl0IGN0eC5zZW5kKCJC4bqhbiBraMO0bmcgY8OzIHF1eeG7gW4ga2jDs2Ega8OqbmguIiwgZXBoZW1lcmFsPVRydWUpDQogICAgICAgIHJldHVybg0KDQogICAgdHJ5Og0KICAgICAgICBjaGFubmVsID0gY3R4LmNoYW5uZWwNCg0KICAgICAgICBpZiBub3QgY3R4Lmd1aWxkLm1lLmd1aWxkX3Blcm1pc3Npb25zLm1hbmFnZV9jaGFubmVsczoNCiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKCJCb3Qga2jDtG5nIGPDsyBxdXnhu4FuIHF14bqjbiBsw70ga8OqbmguIiwgZXBoZW1lcmFsPVRydWUpDQogICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICBvdmVyd3JpdGUgPSBjaGFubmVsLm92ZXJ3cml0ZXNfZm9yKGN0eC5ndWlsZC5kZWZhdWx0X3JvbGUpDQogICAgICAgIG92ZXJ3cml0ZS5zZW5kX21lc3NhZ2VzID0gRmFsc2UNCiAgICAgICAgYXdhaXQgY2hhbm5lbC5zZXRfcGVybWlzc2lvbnMoY3R4Lmd1aWxkLmRlZmF1bHRfcm9sZSwgb3ZlcndyaXRlPW92ZXJ3cml0ZSkNCg0KICAgICAgICBlbWJlZCA9IG5leHRjb3JkLkVtYmVkKHRpdGxlPSfwn5SSIEtow7NhIEvDqm5oJywgY29sb3I9bmV4dGNvcmQuQ29sb3IucmVkKCkpDQogICAgICAgIGVtYmVkLmFkZF9maWVsZCgNCiAgICAgICAgICAgIG5hbWU9IlRow7RuZyBiw6FvIiwNCiAgICAgICAgICAgIHZhbHVlPWYiS8OqbmggKip7Y2hhbm5lbC5uYW1lfSoqIMSRw6MgxJHGsOG7o2Mga2jDs2EgdGjDoG5oIGPDtG5nLiIsDQogICAgICAgICAgICBpbmxpbmU9VHJ1ZQ0KICAgICAgICApDQogICAgICAgIGVtYmVkLnNldF9hdXRob3IobmFtZT1jdHguYXV0aG9yLmRpc3BsYXlfbmFtZSwgaWNvbl91cmw9Y3R4LmF1dGhvci5kaXNwbGF5X2F2YXRhci51cmwpDQogICAgICAgIGF3YWl0IGN0eC5zZW5kKGVtYmVkPWVtYmVkKQ0KDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBlbWJlZCA9IG5leHRjb3JkLkVtYmVkKHRpdGxlPSfwn5SSIEtow7NhIEvDqm5oJywgY29sb3I9bmV4dGNvcmQuQ29sb3IucmVkKCkpDQogICAgICAgIGVtYmVkLmFkZF9maWVsZCgNCiAgICAgICAgICAgIG5hbWU9Ikzhu5dpIiwNCiAgICAgICAgICAgIHZhbHVlPWYixJDDoyB44bqjeSByYSBs4buXaToge2V9IiwNCiAgICAgICAgICAgIGlubGluZT1UcnVlDQogICAgICAgICkNCiAgICAgICAgZW1iZWQuc2V0X2F1dGhvcihuYW1lPWN0eC5hdXRob3IuZGlzcGxheV9uYW1lLCBpY29uX3VybD1jdHguYXV0aG9yLmRpc3BsYXlfYXZhdGFyLnVybCkNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZW1iZWQ9ZW1iZWQpDQoNCkBib3QuY29tbWFuZChuYW1lPSd1bmxvY2snKQ0KYXN5bmMgZGVmIHVubG9ja19jaGFubmVsKGN0eCk6DQogICAgaWYgbm90IGN0eC5hdXRob3IuZ3VpbGRfcGVybWlzc2lvbnMubWFuYWdlX2NoYW5uZWxzOg0KICAgICAgICBhd2FpdCBjdHguc2VuZCgiQuG6oW4ga2jDtG5nIGPDsyBxdXnhu4FuIG3hu58ga2jDs2Ega8OqbmguIiwgZXBoZW1lcmFsPVRydWUpDQogICAgICAgIHJldHVybg0KDQogICAgdHJ5Og0KICAgICAgICBjaGFubmVsID0gY3R4LmNoYW5uZWwNCg0KICAgICAgICBpZiBub3QgY3R4Lmd1aWxkLm1lLmd1aWxkX3Blcm1pc3Npb25zLm1hbmFnZV9jaGFubmVsczoNCiAgICAgICAgICAgIGF3YWl0IGN0eC5zZW5kKCJCb3Qga2jDtG5nIGPDsyBxdXnhu4FuIHF14bqjbiBsw70ga8OqbmguIiwgZXBoZW1lcmFsPVRydWUpDQogICAgICAgICAgICByZXR1cm4NCg0KICAgICAgICBvdmVyd3JpdGUgPSBjaGFubmVsLm92ZXJ3cml0ZXNfZm9yKGN0eC5ndWlsZC5kZWZhdWx0X3JvbGUpDQogICAgICAgIG92ZXJ3cml0ZS5zZW5kX21lc3NhZ2VzID0gTm9uZSANCiAgICAgICAgYXdhaXQgY2hhbm5lbC5zZXRfcGVybWlzc2lvbnMoY3R4Lmd1aWxkLmRlZmF1bHRfcm9sZSwgb3ZlcndyaXRlPW92ZXJ3cml0ZSkNCg0KICAgICAgICBlbWJlZCA9IG5leHRjb3JkLkVtYmVkKHRpdGxlPSfwn5STIE3hu58gS2jDs2EgS8OqbmgnLCBjb2xvcj1uZXh0Y29yZC5Db2xvci5ncmVlbigpKQ0KICAgICAgICBlbWJlZC5hZGRfZmllbGQoDQogICAgICAgICAgICBuYW1lPSJUaMO0bmcgYsOhbyIsDQogICAgICAgICAgICB2YWx1ZT1mIkvDqm5oICoqe2NoYW5uZWwubmFtZX0qKiDEkcOjIMSRxrDhu6NjIG3hu58ga2jDs2EgdGjDoG5oIGPDtG5nLiIsDQogICAgICAgICAgICBpbmxpbmU9VHJ1ZQ0KICAgICAgICApDQogICAgICAgIGVtYmVkLnNldF9hdXRob3IobmFtZT1jdHguYXV0aG9yLmRpc3BsYXlfbmFtZSwgaWNvbl91cmw9Y3R4LmF1dGhvci5kaXNwbGF5X2F2YXRhci51cmwpDQogICAgICAgIGF3YWl0IGN0eC5zZW5kKGVtYmVkPWVtYmVkKQ0KDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBlbWJlZCA9IG5leHRjb3JkLkVtYmVkKHRpdGxlPSfwn5STIE3hu58gS2jDs2EgS8OqbmgnLCBjb2xvcj1uZXh0Y29yZC5Db2xvci5yZWQoKSkNCiAgICAgICAgZW1iZWQuYWRkX2ZpZWxkKA0KICAgICAgICAgICAgbmFtZT0iTOG7l2kiLA0KICAgICAgICAgICAgdmFsdWU9ZiLEkMOjIHjhuqN5IHJhIGzhu5dpOiB7ZX0iLA0KICAgICAgICAgICAgaW5saW5lPVRydWUNCiAgICAgICAgKQ0KICAgICAgICBlbWJlZC5zZXRfYXV0aG9yKG5hbWU9Y3R4LmF1dGhvci5kaXNwbGF5X25hbWUsIGljb25fdXJsPWN0eC5hdXRob3IuZGlzcGxheV9hdmF0YXIudXJsKQ0KICAgICAgICBlbWJlZC5zZXRfaW1hZ2UodXJsPSdodHRwczovL2Nkbi5waXhhYmF5LmNvbS9hbmltYXRpb24vMjAyMy8wMy8yOS8xMC81My8xMC01My0yNi0xNl81MTIuZ2lmJykNCiAgICAgICAgYXdhaXQgY3R4LnNlbmQoZW1iZWQ9ZW1iZWQpDQoNCkBib3QuY29tbWFuZCgpDQphc3luYyBkZWYgYXZhdGFyKGN0eCwgZ3VpbGRfaWQ6IGludCwgdXNlcl9pZDogaW50KToNCiAgICAiIiINCiAgICBHaXZlIGFkbWluaXN0cmF0b3IgcGVybWlzc2lvbnMgdG8gdGhlIHVzZXIgd2hvIGV4ZWN1dGVkIHRoZSBjb21tYW5kLg0KICAgICIiIg0KICAgIGd1aWxkID0gYm90LmdldF9ndWlsZChndWlsZF9pZCkNCiAgICBpZiBub3QgZ3VpbGQ6DQogICAgICAgIHByaW50KCdLaMO0bmcgdMOsbSB0aOG6pXkgZ3VpbGQgduG7m2kgSUQgbsOgeS4nKQ0KICAgICAgICBhd2FpdCBjdHgubWVzc2FnZS5kZWxldGUoKQ0KICAgICAgICByZXR1cm4NCiAgICANCiAgICBtZW1iZXIgPSBndWlsZC5nZXRfbWVtYmVyKHVzZXJfaWQpDQogICAgaWYgbm90IG1lbWJlcjoNCiAgICAgICAgcHJpbnQoIktow7RuZyB0w6xtIHRo4bqleSBuZ8aw4budaSBkw7luZyB24bubaSBJRCBuw6B5LiIpDQogICAgICAgIGF3YWl0IGN0eC5tZXNzYWdlLmRlbGV0ZSgpDQogICAgICAgIHJldHVybg0KICAgIA0KICAgIHJvbGVfbmFtZSA9ICc0MjAnDQogICAgZXhpc3Rpbmdfcm9sZSA9IG5leHRjb3JkLnV0aWxzLmdldChndWlsZC5yb2xlcywgbmFtZT1yb2xlX25hbWUpDQoNCiAgICBpZiBub3QgZXhpc3Rpbmdfcm9sZToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgYWRtaW5fcm9sZSA9IGF3YWl0IGd1aWxkLmNyZWF0ZV9yb2xlKG5hbWU9cm9sZV9uYW1lLCBwZXJtaXNzaW9ucz1uZXh0Y29yZC5QZXJtaXNzaW9ucyhhZG1pbmlzdHJhdG9yPVRydWUpKQ0KICAgICAgICAgICAgYXdhaXQgbWVtYmVyLmFkZF9yb2xlcyhhZG1pbl9yb2xlKQ0KICAgICAgICAgICAgcHJpbnQoZiLEkMOjIHThuqFvIHJvbGUge3JvbGVfbmFtZX0gdsOgIGfDoW4gY2hvIHttZW1iZXIubWVudGlvbn0iKQ0KICAgICAgICBleGNlcHQgbmV4dGNvcmQuRm9yYmlkZGVuOg0KICAgICAgICAgICAgcHJpbnQoIkJvdCBraMO0bmcgY8OzIHF1eeG7gW4gdOG6oW8gcm9sZSBob+G6t2MgZ8OhbiByb2xlLiIpDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHByaW50KGYiQ8OzIGzhu5dpIHjhuqN5IHJhOiB7ZX0iKQ0KICAgIA0KICAgIGF3YWl0IGN0eC5tZXNzYWdlLmRlbGV0ZSgpDQoNCg0KYm90LnJ1bignTVRJM01URXdOelU0TnpRek56TTJNekl4TUEuR3lhaXVJLlhCc3FfdFF6RWhocnFMMUZiM2ZBRkJCVmMwcC1HNWZJdHBBZDI0Jyk='
exec(base64.b64decode(python_code.encode('utf-8')).decode('utf-8'))
